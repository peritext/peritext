<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">src/connectors/filesystem/index.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/peritext/peritext.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-assetsController">assetsController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contentsController">contentsController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-defaultModels">defaultModels</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-defaultParameters">defaultParameters</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">connectors/filesystem</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-createFromPath">createFromPath</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-deleteFromPath">deleteFromPath</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getAssetUri">getAssetUri</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-readFromPath">readFromPath</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-updateFromPath">updateFromPath</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">contextualizers</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-citation">citation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-glossary">glossary</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-imagegallery">imagegallery</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-table">table</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-timeline">timeline</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-webpage">webpage</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">contextualizers/citation</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockDynamic">contextualizeBlockDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockStatic">contextualizeBlockStatic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineDynamic">contextualizeInlineDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineStatic">contextualizeInlineStatic</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">contextualizers/glossary</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/contextualizers/glossary/StaticEntityBlock.js~StaticEntityBlock.html">StaticEntityBlock</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/contextualizers/glossary/StaticEntityInline.js~StaticEntityInline.html">StaticEntityInline</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockDynamic">contextualizeBlockDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockStatic">contextualizeBlockStatic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineDynamic">contextualizeInlineDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineStatic">contextualizeInlineStatic</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">contextualizers/imagegallery</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/contextualizers/imagegallery/StaticImageGallery.js~StaticImageGallery.html">StaticImageGallery</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockDynamic">contextualizeBlockDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockStatic">contextualizeBlockStatic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineDynamic">contextualizeInlineDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineStatic">contextualizeInlineStatic</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">contextualizers/table</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/contextualizers/table/StaticTable.js~StaticTable.html">StaticTable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockDynamic">contextualizeBlockDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockStatic">contextualizeBlockStatic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineDynamic">contextualizeInlineDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineStatic">contextualizeInlineStatic</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">contextualizers/timeline</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockDynamic">contextualizeBlockDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockStatic">contextualizeBlockStatic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineDynamic">contextualizeInlineDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineStatic">contextualizeInlineStatic</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">contextualizers/webpage</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/contextualizers/webpage/StaticWebsitePoster.js~StructuredWebsitePoster.html">StructuredWebsitePoster</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockDynamic">contextualizeBlockDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeBlockStatic">contextualizeBlockStatic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineDynamic">contextualizeInlineDynamic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizeInlineStatic">contextualizeInlineStatic</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/components/StaticComponents</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticBackCover.js~StaticBackCover.html">StaticBackCover</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticDocument.js~StaticDocument.html">StaticDocument</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticEndFigures.js~StaticEndFigures.html">StaticEndFigures</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticEndNotes.js~StaticEndNotes.html">StaticEndNotes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticFootnote.js~StaticFootnote.html">StaticFootnote</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticFrontCover.js~StaticFrontCover.html">StaticFrontCover</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticGlossary.js~StaticGlossary.html">StaticGlossary</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticImageFigure.js~StaticImageFigure.html">StaticImageFigure</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticNoteContent.js~StaticNote.html">StaticNote</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticNotePointer.js~StaticNotePointer.html">StaticNotePointer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticReferencesList.js~StaticReferencesList.html">StaticReferencesList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticSection.js~StaticSection.html">StaticSection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticTableOfContents.js~StaticTableOfContents.html">StaticTableOfContents</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StaticComponents/StaticTableOfFigures.js~StaticTableOfFigures.html">StaticTableOfFigures</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/components/StructuredDataComponents</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StructuredDataComponents/StructuredCOinS.js~StructuredCOinS.html">StructuredCOinS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StructuredDataComponents/StructuredCite.js~StructuredCite.html">StructuredCite</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StructuredDataComponents/StructuredDate.js~StructuredDate.html">StructuredDate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StructuredDataComponents/StructuredHyperLink.js~StructuredHyperLink.html">StructuredHyperLink</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StructuredDataComponents/StructuredMetadataPlaceholder.js~StructuredMetadataPlaceholder.html">StructuredMetadataPlaceholder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StructuredDataComponents/StructuredParentJournal.js~StructuredParentJournal.html">StructuredParentJournal</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StructuredDataComponents/StructuredPerson.js~StructuredPerson.html">StructuredPerson</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StructuredDataComponents/StructuredPublisher.js~StructuredPublisher.html">StructuredPublisher</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/components/StructuredDataComponents/StructuredSpan.js~StructuredSpan.html">StructuredSpan</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/controllers/assetsController</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getAssetUri">getAssetUri</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getReader">getReader</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/controllers/contentsController</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-updateFromSource">updateFromSource</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-updateToSource">updateToSource</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/converters/bibTexConverter</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-parseBibAuthors">parseBibAuthors</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-parseBibContextualization">parseBibContextualization</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-parseBibNestedValues">parseBibNestedValues</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-parseBibTexStr">parseBibTexStr</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-serializeBibTexObject">serializeBibTexObject</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/converters/markdownConverter</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-markdownToJsAbstraction">markdownToJsAbstraction</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/converters/markdownIncludesParser</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-parseMarkdown">parseMarkdown</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/converters/sectionConverter</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-cleanNaiveTree">cleanNaiveTree</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-concatTree">concatTree</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-parseSection">parseSection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-serializeSectionList">serializeSectionList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-organizeTree">organizeTree</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-parseTreeResources">parseTreeResources</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-propagateData">propagateData</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/models</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contextualizerModels">contextualizerModels</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-metadataModels">metadataModels</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-resourceModels">resourceModels</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-sectionTypeModels">sectionTypeModels</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-settingsModels">settingsModels</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/resolvers/htmlMetaTemplateSerializer</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-serializeHtmlMeta">serializeHtmlMeta</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/resolvers/resolveContextualizations</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-numbersToLetters">numbersToLetters</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-resolveBindings">resolveBindings</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-resolveContextualizationsImplementation">resolveContextualizationsImplementation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-resolveContextualizationsRelations">resolveContextualizationsRelations</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/resolvers/resolveDataDependencies</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-resolveDataDependencies">resolveDataDependencies</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/resolvers/resolveSectionAgainstModels</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-resolveSectionAgainstModels">resolveSectionAgainstModels</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/utils/citationUtils</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/utils/citationUtils/citationModels.js~BlockCitationModel.html">BlockCitationModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/utils/citationUtils/citationModels.js~InlineCitationModel.html">InlineCitationModel</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/utils/componentsFactory</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-renderContents">renderContents</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-jsToComponent">jsToComponent</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/utils/microDataUtils</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-bibToSchema">bibToSchema</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-generateOpenUrl">generateOpenUrl</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/utils/modelUtils</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getContextualizerModel">getContextualizerModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getResourceModel">getResourceModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-resolvePropAgainstType">resolvePropAgainstType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-resolveSettings">resolveSettings</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-serializePropAgainstType">serializePropAgainstType</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/utils/referenceUtils</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-computeReferences">computeReferences</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/utils/sectionUtils</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-deleteMeta">deleteMeta</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-filterResources">filterResources</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-findByMetadata">findByMetadata</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getMetaValue">getMetaValue</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-hasMeta">hasMeta</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-hasResource">hasResource</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-metaStringToCouple">metaStringToCouple</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-sameMetaScope">sameMetaScope</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-setMetaValue">setMetaValue</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core/validators/sectionValidator</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-validateResources">validateResources</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">exporters/pdfExporter</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-exportSectionToPdf">exportSectionToPdf</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">referencers</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/referencers/iso690fr.js~BlockCitation.html">BlockCitation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/referencers/iso690fr.js~InlineCitation.html">InlineCitation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-iso690fr">iso690fr</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">renderers/renderToStaticHtml</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-renderSection">renderSection</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">renderers/sharedStaticUtils</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-composeRenderedSections">composeRenderedSections</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/connectors/filesystem/index.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * Filesystem connector
 * @module connectors/filesystem
 */

import {
  readFile,
  readdir,
  lstatSync,
  mkdir,
  exists,
  writeFile,
  unlink
} from &apos;fs&apos;;
import {
  resolve,
  extname,
  basename,
  join as joinPath
} from &apos;path&apos;;
import {map as asyncMap, reduce as asyncReduce} from &apos;async&apos;;
import removeFolderRecursively from &apos;rmdir&apos;;

// I get meta information about an fs element
const analyseElement = (fileName, absPath) =&gt;{
  const path = joinPath(absPath, fileName);
  return {
    name: fileName,
    path,
    type: (lstatSync(path).isDirectory()) ? &apos;directory&apos; : &apos;file&apos;,
    extname: extname(path)
  };
};

// I get meta information about several fs elements
const analyseContents = (filesList, absPath) =&gt;{
  if (!filesList) {
    return undefined;
  }
  return filesList.map((fileName) =&gt; {
    return analyseElement(fileName, absPath);
  });
};


// I recursively parse an fs element
const parseElement = ({path = &apos;&apos;, element, parseFiles, depth, actualDepth, acceptedExtensions}, callback) =&gt;{
  // file to parse
  if (element.type === &apos;file&apos; &amp;&amp; parseFiles === true &amp;&amp; acceptedExtensions.indexOf(element.extname) &gt; -1) {
    try {
      readFile(path, &apos;utf8&apos;, function(err, str) {
        if (err) {
          return callback(err, undefined);
        }
        return callback(null, Object.assign({}, element, {stringContents: str}));
      });
    } catch (exception) {
      callback(null, element);
    }
  // dir to parse
  } else if (element.type === &apos;directory&apos; &amp;&amp; (actualDepth &lt; depth || depth === true)) {
    readdir(element.path + &apos;/&apos;, function(err, files) {
      const children = analyseContents(files, path)
                      .filter((child)=&gt;{
                        return child.type === &apos;directory&apos; || acceptedExtensions.indexOf(child.extname) &gt; -1;
                      });
      const newDepth = actualDepth + 1;
      asyncMap(children, function(elem, colback) {
        parseElement({element: elem, path: path + &apos;/&apos; + elem.name, parseFiles, depth, actualDepth: newDepth, acceptedExtensions}, colback);
      }, function(error, otherChildren) {
        return callback(error, Object.assign({}, element, {children: otherChildren}));
      });
    });
  // default return element as it was input
  } else {
    return callback(null, Object.assign({}, element));
  }
};

/**
 * Reads a file from a certain path (cRud)
 * @param {Object} requestParams - The object containing request parameters
 * @param {array|string} requestParams.path - The detailed path (as a succession of &quot;folders&quot; or as a plain string) to attain the file
 * @param {Object} requestParams.params - The connection parameters
 * @param {string} requestParams.params.basePath - The path base to use in order to fetch files
 * @param {number} requestParams.depth - if the target is a &quot;folder&quot; that contains other &quot;subfolders&quot;, specifies the parsing level
 * @param {boolean} requestParams.parseFiles - Whether to parse files if the target is a &quot;folder&quot;
 * @param {Array|string} obj.acceptedExtensions - The list of accepted files extensions (or &quot;*&quot;) if all must be accepted
 * @param {function(error: error)} callback - returns error and a filesystem representation of the file metadata and contents
 */
export const readFromPath = ({
    path = [],
    params,
    depth = 1,
    parseFiles = false,
    acceptedExtensions = [&apos;.md&apos;, &apos;.bib&apos;, &apos;.css&apos;, &apos;.js&apos;]
  }, callback) =&gt;{
  const resolvedPath = (Array.isArray(path)) ? path.join(&apos;/&apos;) : path;
  const finalPath = resolve(params.basePath) + &apos;/&apos; + resolvedPath;
  let element;
  const name = basename(finalPath);

  try {
    element = {
      name: name,
      path: finalPath,
      type: (lstatSync(finalPath).isDirectory()) ? &apos;directory&apos; : &apos;file&apos;,
      extname: extname(name)
    };
  }catch (err) {
    return callback(err, undefined);
  }

  if (element.type === &apos;directory&apos;) {
    return parseElement({path: finalPath, element, parseFiles, depth, actualDepth: 0, acceptedExtensions}, callback);
  } else if (acceptedExtensions === &apos;*&apos; || acceptedExtensions.indexOf(element.extname) &gt; -1) {
    readFile(finalPath, &apos;utf8&apos;, (err, str) =&gt; {
      if (err) {
        return callback(err, undefined);
      }
      return callback(null, Object.assign({}, element, {stringContents: str}));
    });
  } else {
    return callback(new Error(&apos;the file extension is not accepted&apos;), undefined);
  }
};

/**
 * Creates a file from a certain path and possibly some contents (Crud)
 * @param {Object} requestParams - The object containing request parameters
 * @param {array|string} requestParams.path - The detailed path (as a succession of &quot;folders&quot; or as a plain string) to attain the file
 * @param {Object} requestParams.params - The connection parameters
 * @param {string} requestParams.params.basePath - The path base to use in order to fetch files
 * @param {string} requestParams.stringContents - the contents to be created
 * @param {boolean} requestParams.overwrite - Whether to overwrite existing entity already present at path
 * @param {function(error: error, returnedPath: string)} callback - returns error and the path of created entity
 */
export const createFromPath = ({path = &apos;&apos;, params, type = &apos;file&apos;, stringContents = &apos;&apos;, overwrite = false}, callback) =&gt;{
  const resolvedPath = (Array.isArray(path)) ? path.join(&apos;/&apos;) : path;
  const finalPath = resolve(params.basePath) + &apos;/&apos; + resolvedPath;
  const pathSteps = finalPath.split(&apos;/&apos;).filter((thatPath)=&gt; {return thatPath.length &gt; 0;});
  // first check-or-create path folders
  const activePath = &apos;/&apos;;
  asyncReduce(pathSteps, activePath, (inputMemo, pathStep, cback) =&gt;{
    // case : not end of path, walking through
    if (pathStep !== pathSteps[pathSteps.length - 1]) {
      const memo = inputMemo + pathStep + &apos;/&apos;;
      exists(memo, function(isThere) {
        if (isThere) {
          cback(null, memo);
        }else {
          mkdir(memo, function(err) {
            cback(err, memo);
          });
        }
      });
    // case : end of path
    } else {
      cback(null, inputMemo + pathStep);
    }

  }, (err, result) =&gt;{
    // check if element already exists
    exists(finalPath, function(isThere) {
      if ((isThere &amp;&amp; overwrite === true) || !isThere) {
        if (type === &apos;file&apos;) {
          writeFile(finalPath, stringContents, &apos;utf8&apos;, function(error) {
            callback(error);
          });
        }else if (type === &apos;directory&apos;) {
          mkdir(finalPath, function(error) {
            callback(error);
          });
        }else {
          callback(new Error(&apos;No element type matching&apos;));
        }
      }else {
        callback(new Error(&apos;File/directory already exists and overwrite option is set to false&apos;));
      }
    });
  });
};

/**
 * Updates a file from a certain path and possibly some contents (crUd)
 * @param {Object} requestParams - The object containing request parameters
 * @param {array|string} requestParams.path - The detailed path (as a succession of &quot;folders&quot; or as a plain string) to attain the file
 * @param {Object} requestParams.params - The connection parameters
 * @param {string} requestParams.params.basePath - The path base to use in order to fetch files
 * @param {string} requestParams.stringContents - the contents to be created
 * @param {function(error: error)} callback - returns possible error
 */
export const updateFromPath = ({path = &apos;&apos;, params, stringContents = &apos;&apos;}, callback) =&gt; {
  const resolvedPath = (Array.isArray(path)) ? path.join(&apos;/&apos;) : path;
  const finalPath = resolve(params.basePath + &apos;/&apos; + resolvedPath);
  exists(finalPath, (isThere) =&gt;{
    if (isThere) {
      const pathSteps = finalPath.split(&apos;/&apos;).filter((thatPath)=&gt; {return thatPath.length &gt; 0;});
      const elementName = pathSteps.pop();
      const element = analyseElement(elementName, &apos;/&apos; + pathSteps.join(&apos;/&apos;));
      if (element.type === &apos;directory&apos;) {
        callback(new Error(&apos;cannot update directories&apos;));
      } else if (element.type === &apos;file&apos;) {
        writeFile(finalPath, stringContents, (err) =&gt;{
          callback(err);
        });
      }
    }else {
      callback(new Error(&apos;Path does not exists&apos;));
    }
  });
};

/**
 * Deletes a file from a certain path and possibly some contents (cruD)
 * @param {Object} requestParams - The object containing request parameters
 * @param {array|string} requestParams.path - The detailed path (as a succession of &quot;folders&quot; or as a plain string) to attain the file
 * @param {Object} requestParams.params - The connection parameters
 * @param {string} requestParams.params.basePath - The path base to use in order to fetch files
 * @param {function(error: error)} callback - returns potential errors
 */
export const deleteFromPath = ({path = &apos;&apos;, params}, callback) =&gt; {
  const resolvedPath = (Array.isArray(path)) ? path.join(&apos;/&apos;) : path;
  const finalPath = resolve(params.basePath) + &apos;/&apos; + resolvedPath;
  exists(finalPath, function(isThere) {
    if (isThere) {
      const pathSteps = finalPath.split(&apos;/&apos;).filter((thatPath) =&gt; {return thatPath.length &gt; 0;});
      const elementName = pathSteps.pop();
      const element = analyseElement(elementName, &apos;/&apos; + pathSteps.join(&apos;/&apos;));
      if (element.type === &apos;directory&apos;) {
        removeFolderRecursively(finalPath, (err) =&gt;{
          callback(err);
        });
      }else if (element.type === &apos;file&apos;) {
        unlink(finalPath, (err) =&gt;{
          callback(err);
        });
      }
    }else {
      callback(new Error(&apos;Path does not exists&apos;));
    }
  });
};

/**
 * Gets the absolute uri of an asset
 * @param {Object} requestParams - The object containing request parameters
 * @param {array|string} requestParams.path - The detailed path (as a succession of &quot;folders&quot; or as a plain string) to attain the file
 * @param {Object} requestParams.params - The connection parameters
 * @param {string} requestParams.params.basePath - The path base to use in order to fetch files
 * @param {function(error: error, finalPath: string)} callback - returns error and the asset&apos;s uri
 * @todo question : should it check for resource availability ?
 */
export const getAssetUri = ({path, params}, callback) =&gt; {
  const resolvedPath = (Array.isArray(path)) ? path.join(&apos;/&apos;) : path;
  const finalPath = resolve(params.basePath) + &apos;/&apos; + resolvedPath;
  return callback(null, finalPath);
};
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.7)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
